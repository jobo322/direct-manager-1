{"version":3,"file":"direct-manager.min.js","sources":["../src/utils/roundTo.js","../src/index.js"],"sourcesContent":["/**\n * Returns the number with the decimal places specified in the options\n * @param {number} number - The number to be rounded.\n * @param {Object} [options={}]\n * @param {number} [options.decimals] - Number of decimals.\n * @return {number}\n */\n\nexport function roundTo(number, options = {}) {\n  const { decimals = 4 } = options;\n  const power = 10 ** decimals;\n  return Math.round(number * power) / power;\n}\n","import { roundTo } from './utils/roundTo';\n\n/**\n * DIviding RECTangles manager for NMR spectra optimization\n * @param {Array} prediction - Prediction obtained with SPINUS\n */\nexport default class DirectManager {\n  constructor(prediction) {\n    this.prediction = prediction;\n    let parameters = [];\n    for (let atom of prediction) {\n      let item = {};\n      item.delta = atom.delta;\n      item.multiplicity = atom.multiplicity;\n      item.j = [];\n      for (let j of atom.j) {\n        item.j.push(j.coupling);\n      }\n      parameters.push(item);\n    }\n    this.parameters = parameters;\n  }\n\n  getParameters() {\n    return this.parameters;\n  }\n\n  suggestBoundaries(options = {}) {\n    const parameters = this.parameters;\n    const { error = 0.1 } = options;\n    let result = [];\n    for (let parameter of parameters) {\n      let atom = {};\n      atom.lowerDelta = roundTo(parameter.delta - error);\n      atom.upperDelta = roundTo(parameter.delta + error);\n      atom.lowerJcoupling = [];\n      atom.upperJcoupling = [];\n      for (let coupling of parameter.j) {\n        atom.lowerJcoupling.push(roundTo(coupling - error));\n        atom.upperJcoupling.push(roundTo(coupling + error));\n      }\n      result.push(atom);\n    }\n    return result;\n  }\n\n  getBoundaries(boundaries, options = {}) {\n    let { error = 0.1 } = options;\n    boundaries = boundaries\n      ? boundaries\n      : this.suggestBoundaries({ error: error });\n    let result = { lower: [], upper: [] };\n    for (let atom of boundaries) {\n      result.lower.push(atom.lowerDelta);\n      result.upper.push(atom.upperDelta);\n      for (let i = 0; i < atom.lowerJcoupling.length; i++) {\n        result.lower.push(atom.lowerJcoupling[i]);\n        result.upper.push(atom.upperJcoupling[i]);\n      }\n    }\n    return result;\n  }\n\n  tidyUpParameters() {\n    let result = this.prediction.slice();\n    let counter = 0;\n    return function (parameters) {\n      for (let atom of result) {\n        atom.delta = parameters[counter++];\n        for (let jcoupling of atom.j) {\n          jcoupling.coupling = parameters[counter++];\n        }\n      }\n      counter = 0;\n      return result;\n    };\n  }\n}\n"],"names":["roundTo","number","options","decimals","power","Math","round","constructor","prediction","parameters","atom","item","delta","multiplicity","j","push","coupling","getParameters","this","suggestBoundaries","error","result","parameter","lowerDelta","upperDelta","lowerJcoupling","upperJcoupling","getBoundaries","boundaries","lower","upper","i","length","tidyUpParameters","slice","counter","jcoupling"],"mappings":"8OAQO,SAASA,EAAQC,EAAQC,EAAU,UAClCC,SAAEA,EAAW,GAAMD,EACnBE,EAAQ,IAAMD,SACbE,KAAKC,MAAML,EAASG,GAASA,SCLvB,MACbG,YAAYC,QACLA,WAAaA,MACdC,EAAa,OACZ,IAAIC,KAAQF,EAAY,KACvBG,EAAO,GACXA,EAAKC,MAAQF,EAAKE,MAClBD,EAAKE,aAAeH,EAAKG,aACzBF,EAAKG,EAAI,OACJ,IAAIA,KAAKJ,EAAKI,EACjBH,EAAKG,EAAEC,KAAKD,EAAEE,UAEhBP,EAAWM,KAAKJ,QAEbF,WAAaA,EAGpBQ,uBACSC,KAAKT,WAGdU,kBAAkBjB,EAAU,UACpBO,EAAaS,KAAKT,YAClBW,MAAEA,EAAQ,IAAQlB,MACpBmB,EAAS,OACR,IAAIC,KAAab,EAAY,KAC5BC,EAAO,GACXA,EAAKa,WAAavB,EAAQsB,EAAUV,MAAQQ,GAC5CV,EAAKc,WAAaxB,EAAQsB,EAAUV,MAAQQ,GAC5CV,EAAKe,eAAiB,GACtBf,EAAKgB,eAAiB,OACjB,IAAIV,KAAYM,EAAUR,EAC7BJ,EAAKe,eAAeV,KAAKf,EAAQgB,EAAWI,IAC5CV,EAAKgB,eAAeX,KAAKf,EAAQgB,EAAWI,IAE9CC,EAAON,KAAKL,UAEPW,EAGTM,cAAcC,EAAY1B,EAAU,QAC9BkB,MAAEA,EAAQ,IAAQlB,EACtB0B,EAAaA,GAETV,KAAKC,kBAAkB,CAAEC,MAAOA,QAChCC,EAAS,CAAEQ,MAAO,GAAIC,MAAO,QAC5B,IAAIpB,KAAQkB,EAAY,CAC3BP,EAAOQ,MAAMd,KAAKL,EAAKa,YACvBF,EAAOS,MAAMf,KAAKL,EAAKc,gBAClB,IAAIO,EAAI,EAAGA,EAAIrB,EAAKe,eAAeO,OAAQD,IAC9CV,EAAOQ,MAAMd,KAAKL,EAAKe,eAAeM,IACtCV,EAAOS,MAAMf,KAAKL,EAAKgB,eAAeK,WAGnCV,EAGTY,uBACMZ,EAASH,KAAKV,WAAW0B,QACzBC,EAAU,SACP,SAAU1B,OACV,IAAIC,KAAQW,EAAQ,CACvBX,EAAKE,MAAQH,EAAW0B,SACnB,IAAIC,KAAa1B,EAAKI,EACzBsB,EAAUpB,SAAWP,EAAW0B,YAGpCA,EAAU,EACHd"}