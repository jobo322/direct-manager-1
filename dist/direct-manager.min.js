!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).directManager=t()}(this,(function(){"use strict";function e(e,t={}){const{decimals:o=4}=t,i=10**o;return Math.round(e*i)/i}function t(e,t){let o=[];for(let i of t)for(let t of i.ids)t===e&&o.push(i);return o}function o(e,t){let o=t.map((e=>e.diaIDs[0])),i=[];for(let t of e){let e=o.indexOf(t);i.push(`H${e+1}`)}return i}return class{constructor(e){this.prediction=e.slice(),this.couplings=function(e){e=e.slice();let t=[];for(let o=0;o<e.length;o++)for(let i=0;i<e[o].j.length;i++){let r={ids:[],coupling:void 0};r.ids=e[o].diaIDs.slice(),r.ids.push(e[o].j[i].diaID),r.coupling=e[o].j[i].coupling,t.push(r)}return t.filter((function(e){return!this.find((t=>t===e.coupling))&&(this.push(e.coupling),!0)}),[])}(e)}getParameters(){let e=this.prediction.slice(),t=this.couplings.slice(),i=[];for(let r of t)i.push({type:"coupling",atom:r.ids,atomIDs:o(r.ids,e),value:r.coupling});for(let t of e)i.push({type:"delta",atom:t.diaIDs,atomIDs:o(t.diaIDs,e),value:t.delta});return i}suggestBoundaries(t={}){const o=this.getParameters(),{error:i=.1}=t;let r=[];for(let t of o){let o={};o.atom=t.atom,o.type=t.type,o.atomIDs=t.atomIDs,o.lower=e(t.value-i),o.upper=e(t.value+i),r.push(o)}return r}getBoundaries(e,t={}){let{error:o=.1}=t;e=e||this.suggestBoundaries({error:o});let i={lower:[],upper:[]};for(let t of e)i.lower.push(t.lower),i.upper.push(t.upper);return i}tidyUpParameters(){let e=this.prediction.slice(),o=this.couplings.slice(),i=0;return function(r){for(let e=0;e<o.length;e++)o[e].coupling=r[e];i+=o.length;for(let s of e){let e=t(s.diaIDs[0],o);s.delta=r[i++];for(let o of s.j){const i=t(o.diaID,e);o.coupling=i[0]?i[0].coupling:[]}}return i=0,e}}}}));
//# sourceMappingURL=direct-manager.min.js.map
